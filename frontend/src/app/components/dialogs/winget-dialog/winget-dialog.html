@if (wingetService.loading()) {
  <div class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading package details...</p>
  </div>
} @else {
  <h2 mat-dialog-title class="dialog-title">
    {{ info()?.Name || 'Unknown Package' }}
    <span class="publisher-text">by {{ info()?.Publisher || 'Unknown' }}</span>
  </h2>

  <mat-dialog-content>
    <div class="meta-row">
      <span class="badge version-badge">v{{ latestVersion() }}</span>
      <span class="badge id-badge">{{ wingetService.wingetPackageSpecific()?.Id }}</span>
      <span class="badge license-badge">{{ info()?.License || 'Unknown License' }}</span>
    </div>

    <div class="description-section">
      <p>{{ info()?.Description || 'No description provided.' }}</p>
    </div>

    @if (info()?.Tags?.length) {
      <div class="tags-section">
        <mat-chip-set>
          @for (tag of info()?.Tags; track tag) {
            <mat-chip>{{ tag }}</mat-chip>
          }
        </mat-chip-set>
      </div>
    }

    <div class="install-snippet">
      <code>&gt; {{ installCommand() }}</code>
      <button mat-icon-button 
              (click)="copyCommand()" 
              [matTooltip]="copied() ? 'Copied!' : 'Copy command'">
        <mat-icon>{{ copied() ? 'check' : 'content_copy' }}</mat-icon>
      </button>
    </div>

    <div class="links-section">
      <button mat-button color="primary" (click)="openLink(info()?.Homepage)">
        <mat-icon>language</mat-icon> Website
      </button>
      <button mat-button color="accent" (click)="openLink(info()?.LicenseUrl)">
        <mat-icon>policy</mat-icon> License
      </button>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="closeDialog()">Close</button>
  </mat-dialog-actions>
}